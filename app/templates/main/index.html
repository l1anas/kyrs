{% extends "base.html" %}

{% block title %}Главная{% endblock %}

{% block content %}
<div class="main-container">
    {% if current_user.is_authenticated %}
        <h1>Добро пожаловать, {{ current_user.username }}!</h1>
    {% else %}
        <h1>Добро пожаловать!</h1>
    {% endif %}

    <div class="search-box">
        <form action="{{ url_for('main.search') }}" method="GET">
            <input type="text" name="q" placeholder="Поиск по проектам, навыкам или авторам..." value="{{ request.args.get('q', '') }}">
            <button type="submit">Найти</button>
        </form>
    </div>

    <div class="projects-list">
        <h2>Доступные проекты</h2>

        {% if projects.items %}
            <div class="projects-grid">
                {% for project in projects.items %}
                    <div class="project-card">
                        <h3>{{ project.title }}</h3>
                        <p class="project-description">{{ project.description }}</p>

                        <div class="project-skills">
                            <strong>Требуемые навыки:</strong>
                            {% for skill in project.skills_required.split(',') %}
                                <span class="skill-badge">{{ skill.strip() }}</span>
                            {% endfor %}
                        </div>
                        <a href="{{ url_for('projects.details', project_id=project.id) }}" class="btn btn-view">
                            Подробнее
                        </a>
                    </div>
                {% endfor %}
            </div>

            <div class="pagination">
                {% if projects.has_prev %}
                    <a href="{{ url_for('main.index', page=projects.prev_num) }}">Предыдущая</a>
                {% endif %}

                <span>Страница {{ projects.page }} из {{ projects.pages }}</span>

                {% if projects.has_next %}
                    <a href="{{ url_for('main.index', page=projects.next_num) }}">Следующая</a>
                {% endif %}
            </div>
        {% else %}
            <p>Пока нет доступных проектов.</p>
        {% endif %}
    </div>
</div>
{% endblock %}